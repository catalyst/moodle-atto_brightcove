YUI.add("moodle-atto_brightcove-button",function(e,t){var n="atto_brightcove",r={BUTTON:"atto_brightcove_submit",FORM:"atto_brightcove_form"},i={VIDEOID:"videoid",WIDTH:"width",HEIGHT:"height"},s='<form class="atto_form {{CSS.FORM}}"><label for="{{INPUT.VIDEOID}}">Brightcove video ID</label><input class="{{INPUT.VIDEOID}}" id="{{INPUT.VIDEOID}}" name="{{INPUT.VIDEOID}}" value="{{defaultvideoid}}" /><label for="{{INPUT.WIDTH}}">{{get_string "width" component}}</label><input class="{{INPUT.WIDTH}}" id="{{INPUT.WIDTH}}" name="{{INPUT.WIDTH}}" value="{{defaultwidth}}" /><label for="{{INPUT.HEIGHT}}">{{get_string "height" component}}</label><input class="{{INPUT.HEIGHT}}" id="{{INPUT.HEIGHT}}" name="{{INPUT.HEIGHT}}" value="{{defaultheight}}" /><br /><br /><button class="{{CSS.BUTTON}}">{{get_string "insert" component}}</button></form>';e.namespace("M.atto_brightcove").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){this.addButton({icon:"icon",iconComponent:"atto_brightcove",tags:"brightcove-video",tagMatchRequiresAll:!1,callback:this._displayDialogue})},_displayDialogue:function(e){this._currentSelection=this.get("host").getSelection();var t=this.getDialogue({headerContent:M.util.get_string("insertvideo",n,null),focusAfterHide:!0},!0);t.set("bodyContent",this._getDialogueContent()).show()},_getDialogueContent:function(){var t=e.Handlebars.compile(s);return this._content=e.Node.create(t({CSS:r,INPUT:i,component:n})),this._content.one("."+r.BUTTON).on("click",this._insertVideo,this),this._content},_insertVideo:function(e){e.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var t=e.currentTarget.ancestor("."+r.FORM).one("."+i.VIDEOID).get("value"),n=e.currentTarget.ancestor("."+r.FORM).one("."+i.WIDTH).get("value"),s=e.currentTarget.ancestor("."+r.FORM).one("."+i.HEIGHT).get("value");this.get("host").setSelection(this._currentSelection);var o='<brightcove-video video-id="'+t+'"';n&&(o=o.concat(' width="'+n+'"')),s&&(o=o.concat(' height="'+s+'"')),o=o.concat("></brightcove-video>"),this.editor.focus(),this.get("host").insertContentAtFocusPoint(o),this.markUpdated()}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
